

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Filter Language &mdash; Project &#34;Sailor&#34;  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API documentation" href="apidoc.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Project "Sailor"
          

          
            
            <img src="_static/sailor_logo_100x100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Filter Language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#named-keyword-arguments">Named Keyword Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extended-filters">Extended Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apidoc.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Project "Sailor"</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Filter Language</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/SAP/project-sailor/blob/master/docs/filter_language.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filter-language">
<span id="filter"></span><h1>Filter Language<a class="headerlink" href="#filter-language" title="Permalink to this headline">¶</a></h1>
<p>Project “Sailor” supports retrieval of objects such as <a class="reference internal" href="apidoc/sailor.assetcentral.equipment.html#sailor.assetcentral.equipment.Equipment" title="sailor.assetcentral.equipment.Equipment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Equipment</span></code></a> or
<a class="reference internal" href="apidoc/sailor.assetcentral.notification.html#sailor.assetcentral.notification.Notification" title="sailor.assetcentral.notification.Notification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Notification</span></code></a> from AssetCentral through functions like
<a class="reference internal" href="apidoc/sailor.assetcentral.equipment.html#sailor.assetcentral.equipment.find_equipment" title="sailor.assetcentral.equipment.find_equipment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_equipment()</span></code></a> or <a class="reference internal" href="apidoc/sailor.assetcentral.notification.html#sailor.assetcentral.notification.find_notifications" title="sailor.assetcentral.notification.find_notifications"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_notifications()</span></code></a>.
All of these functions support a common filter language which is described below. The filter criteria are transformed
into an odata query and forwarded to the server, so only matching objects are retrieved.</p>
<dl class="simple">
<dt>All functions of this kind support two types of parameters:</dt><dd><ul class="simple">
<li><p>named keyword arguments are interpreted as a simple shortcut for equality filters.</p></li>
<li><p>an argument <cite>extended_filters</cite> allows more complex filters such as inequality constraints or filters referring to
another field of the object.</p></li>
</ul>
</dd>
</dl>
<p>The names of all fields known for an object, and hence all fields which may be used for filtering can be determined
by calling the <cite>get_property_mapping</cite> classmethod of the object, such as
<code class="xref py py-meth docutils literal notranslate"><span class="pre">get_property_mapping()</span></code> etc. This method returns a dictionary, and
the keys of this dictionary list all known and filterable fields.</p>
<div class="section" id="named-keyword-arguments">
<h2>Named Keyword Arguments<a class="headerlink" href="#named-keyword-arguments" title="Permalink to this headline">¶</a></h2>
<p>Any <strong>named keyword argument</strong> is applied as an equality filter.</p>
<ul class="simple">
<li><p>The <strong>key</strong> of the keyword argument determines the field of the object against which the filter is executed.</p></li>
<li><p>If the <strong>value</strong> of the keyword argument is a simple object (e.g. a string, int or float), the value of the field in
AssetCentral must be the same as the value of the argument for the filter to match. The type of the argument is
preserved in the query.</p></li>
<li><p>If the <strong>value</strong> of the keyword argument is an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Iterable</span></code> (e.g. a <code class="xref py py-obj docutils literal notranslate"><span class="pre">List</span></code>), then all objects matching <em>any</em>
of the values in the iterable are returned.</p></li>
<li><p>If multiple named arguments are provided, then <em>all</em> conditions have to match.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(short_description='MyNotification')</span></code>
will return all notifications with description ‘MyNotification’.</p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(short_description=['MyNotification',</span> <span class="pre">'MyOtherNotification'])</span></code>
will return all notifications which either have the description ‘MyNotification’ or the description ‘MyOtherNotification’.</p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(short_description='MyNotification',</span> <span class="pre">start_date='2020-07-01')</span></code>
will return all notifications with description ‘MyNotification’ which also have the start date ‘2020-07-01’.</p>
<p>The following example will return all notifications with description ‘MyNotification’ and start date ‘2020-07-01’ or
with description ‘MyOtherNotification’ and start date ‘2020-07-01’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">find_notifications</span><span class="p">(</span><span class="n">short_description</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MyNotification&#39;</span><span class="p">,</span> <span class="s1">&#39;MyOtherNotification&#39;</span><span class="p">],</span>
                   <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2020-07-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="extended-filters">
<h2>Extended Filters<a class="headerlink" href="#extended-filters" title="Permalink to this headline">¶</a></h2>
<p>The <em>extended_filters</em> parameter can be used to specify filters that cannot be expressed as an equality or filters
that should refer to another field of the same object.
Extended filters need to be provided as <code class="xref py py-obj docutils literal notranslate"><span class="pre">List</span></code>. Each element in the list needs to be provided as a <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>
expression conforming to the following grammar: <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">operator</span> <span class="pre">(field|literal)</span></code>. Here unquoted strings are interpreted
as a field reference, while quoted strings as well as unquoted numeric values are interpreted as a literal. Both single
and double quotes may be used for quoting.</p>
<ul class="simple">
<li><p>Supported operators are <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> <code class="docutils literal notranslate"><span class="pre">!=</span></code> <code class="docutils literal notranslate"><span class="pre">==</span></code>.</p></li>
<li><p>As with equality filters, <em>all</em> conditions need to match for a result to be returned.</p></li>
<li><p>Extended filters can be freely combined with named arguments. All filter criteria need to match for a result to be returned.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(extended_filters=['short_description</span> <span class="pre">!=</span> <span class="pre">&quot;MyNotification&quot;'])</span></code>
will return all notifications with a description not matching ‘MyNotification’.</p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(extended_filters=['malfunction_start_date</span> <span class="pre">&gt;</span> <span class="pre">&quot;2020-08-01&quot;',</span> <span class="pre">'malfunction_end_date</span> <span class="pre">&lt;=</span> <span class="pre">&quot;2020-09-01&quot;])</span></code>
will return all notifications in a given timeframe.</p>
<p><code class="docutils literal notranslate"><span class="pre">find_notifications(extended_filters=['malfunction_start_date</span> <span class="pre">==</span> <span class="pre">malfunction_end_date'])</span></code>
will return all notifications where the start date of the malfunction is equal to the end date of the malfunction.</p>
<p>The following example will return all notifications in a given timeframe for both pieces of equipment with ‘id1’ and ‘id2’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">find_notifications</span><span class="p">(</span><span class="n">extended_filters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;malfunction_start_date &gt; &quot;2020-08-01&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;malfunction_end_date &lt;= &quot;2020-09-01&quot;&#39;</span><span class="p">],</span>
                   <span class="n">equipment_id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id1&#39;</span><span class="p">,</span> <span class="s1">&#39;id2&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="apidoc.html" class="btn btn-neutral float-right" title="API documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tutorial.html" class="btn btn-neutral float-left" title="Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SAP SE and project &#34;Sailor&#34; contributors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #e3e3e3;
      color: #000000;
    }
    .wy-side-nav-search>a, .wy-nav-top>a {
        color: #000000;
    }
  </style>


</body>
</html>